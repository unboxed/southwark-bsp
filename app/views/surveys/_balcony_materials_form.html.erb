<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= form_with model: @survey do |form| %>
      <%= render "errors" %>
      <h1 class="govuk-heading-l">Balcony materials</h1>

      <div class="govuk-form-group">
        <fieldset class="govuk-fieldset">
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
            <h2 class="govuk-fieldset__heading">
              Which material is the main balcony structure made from?
            </h2>
          </legend>
          <div class="govuk-radios govuk-radios--conditional" data-module="govuk-radios">
            <% @survey.main_materials.reject { |r| r == "other" }.each do |option| %>
              <div class="govuk-radios__item">
                <%= form.radio_button :balcony_main_material, option, class: "govuk-radios__input" %>
                <%= form.label :balcony_main_material, value: option, class: "govuk-label govuk-radios__label" %>
              </div>
            <% end %>

            <div class="govuk-radios__item">
              <%= form.radio_button :balcony_main_material, "other", class: "govuk-radios__input", data: { "aria-controls" => "conditional-balcony_main_material"} %>
              <%= form.label :balcony_main_material_other, "Other", class: "govuk-label govuk-radios__label" %>
            </div>

            <div class="govuk-radios__conditional govuk-radios__conditional--hidden" id="conditional-balcony_main_material">
              <div class="govuk-form-group">
                <%= form.label :balcony_main_material_details, "Please list any other material", class: "govuk-label" %>
                <%= form.text_area :balcony_main_material_details, class: "govuk-textarea" %>
              </div>
            </div>
          </div>
        </fieldset>
      </div>

      <div class="govuk-form-group">
        <fieldset class="govuk-fieldset" aria-describedby="balcony_floor_materials-hint">
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
            <span class="govuk-fieldset__heading">
              Which materials are the balcony floors made from?
            </span>
          </legend>
          <div id="balcony_floor_materials-hint" class="govuk-hint">
            Select all that apply
          </div>
          <div class="govuk-checkboxes" data-module="govuk-checkboxes">
            <% @survey.floor_materials.reject {|s| s == "other" }.each do |option| %>
              <div class="govuk-checkboxes__item">
                <%= form.check_box :balcony_floor_materials, { class: "govuk-checkboxes__input", id: "survey_balcony_floor_materials_#{option}", multiple: true }, option, nil %>
                <%= form.label :balcony_floor_materials, value: option, class: "govuk-label govuk-checkboxes__label" %>

                <% if I18n.exists?("helpers.hints.survey.balcony_floor_materials.#{option}") %>
                  <div id="balcony_floor_materials-<%= option %>-hint" class="govuk-hint govuk-checkboxes__hint">
                    <%= t("helpers.hints.survey.balcony_floor_materials.#{option}") %>
                  </div>
                <% end %>
              </div>
            <% end %>
            <div class="govuk-checkboxes__item">
              <%= form.check_box :balcony_floor_materials, { class: "govuk-checkboxes__input", id: "survey_balcony_floor_materials_other", multiple: true, data: { "aria-controls": "conditional-other-balcony_floor_materials" }}, "other", nil %>
              <%= form.label :balcony_floor_materials, value: "other", class: "govuk-label govuk-checkboxes__label" %>
            </div>
            <div class="govuk-checkboxes__conditional govuk-checkboxes__conditional--hidden" id="conditional-other-balcony_floor_materials">
              <div class="govuk-form-group">
                <%= form.label :balcony_floor_materials_details, class: "govuk-label" %>
                <%= form.text_area :balcony_floor_materials_details, class: "govuk-textarea" %>
              </div>
            </div>
          </div>
        </fieldset>
      </div>

      <div class="govuk-form-group">
        <fieldset class="govuk-fieldset" aria-describedby="balcony_other_materials-hint">
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
            <span class="govuk-fieldset__heading">
              Which materials are the balcony balustrade and/or railings made from?
            </span>
          </legend>
          <div id="balcony_other_materials-hint" class="govuk-hint">
            Select all that apply
          </div>
          <div class="govuk-checkboxes" data-module="govuk-checkboxes">
            <% @survey.other_materials.reject {|s| s == "other" }.each do |option| %>
              <div class="govuk-checkboxes__item">
                <%= form.check_box :balcony_other_materials, { class: "govuk-checkboxes__input", id: "survey_balcony_other_materials_#{option}", multiple: true }, option, nil %>
                <%= form.label :balcony_other_materials, value: option, class: "govuk-label govuk-checkboxes__label" %>

                <% if I18n.exists?("helpers.hints.survey.balcony_other_materials.#{option}") %>
                  <div id="balcony_other_materials-<%= option %>-hint" class="govuk-hint govuk-checkboxes__hint">
                    <%= t("helpers.hints.survey.balcony_other_materials.#{option}") %>
                  </div>
                <% end %>
              </div>
            <% end %>
            <div class="govuk-checkboxes__item">
              <%= form.check_box :balcony_other_materials, { class: "govuk-checkboxes__input", id: "survey_balcony_other_materials_other", multiple: true, data: { "aria-controls": "conditional-other-balcony_other_materials" }}, "other", nil %>
              <%= form.label :balcony_other_materials, value: "other", class: "govuk-label govuk-checkboxes__label" %>
            </div>
            <div class="govuk-checkboxes__conditional govuk-checkboxes__conditional--hidden" id="conditional-other-balcony_other_materials">
              <div class="govuk-form-group">
                <%= form.label :balcony_other_materials_details, class: "govuk-label" %>
                <%= form.text_area :balcony_other_materials_details, class: "govuk-textarea" %>
              </div>
            </div>
          </div>
        </fieldset>
      </div>

      <%= form.submit "Continue", class: "govuk-button" %>
    <% end %>
  </div>
</div>
